(function(){"use strict";var e={881:function(e,t,n){var i=n(9242),a=n(3396);function o(e,t,n,i,o,l){const s=(0,a.up)("TelegramSettings");return(0,a.wg)(),(0,a.j4)(s)}const l=e=>((0,a.dD)("data-v-344f8ea4"),e=e(),(0,a.Cn)(),e),s=l((()=>(0,a._)("br",null,null,-1))),u=l((()=>(0,a._)("br",null,null,-1))),r=l((()=>(0,a._)("br",null,null,-1))),c=l((()=>(0,a._)("br",null,null,-1))),d=l((()=>(0,a._)("br",null,null,-1))),f={key:0,class:"requestSaved"};function p(e,t,n,i,o,l){const p=(0,a.up)("MDBCardTitle"),h=(0,a.up)("MDBInput"),m=(0,a.up)("MDBCardText"),v=(0,a.up)("MDBBtn"),g=(0,a.up)("MDBCardBody"),k=(0,a.up)("MDBCard"),w=(0,a.up)("MDBSwitch"),D=(0,a.up)("MDBAccordionItem"),b=(0,a.up)("MDBAccordion"),y=(0,a.up)("MDBContainer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[s,u,(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Connectivity settings")])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:o.token,"onUpdate:modelValue":t[0]||(t[0]=e=>o.token=e),label:"Bot token",onChange:t[1]||(t[1]=e=>l.setUnsaved())},null,8,["modelValue"]),r,(0,a.Wm)(h,{modelValue:o.chatId,"onUpdate:modelValue":t[2]||(t[2]=e=>o.chatId=e),label:"Chat ID",onChange:t[3]||(t[3]=e=>l.setUnsaved())},null,8,["modelValue"])])),_:1}),(0,a.Wm)(v,{color:"primary",onClick:l.saveSettings},{default:(0,a.w5)((()=>[(0,a.Uk)("Save")])),_:1},8,["onClick"]),(0,a.Wm)(v,{disabled:!1===o.saved,color:"primary",onClick:l.testSettings},{default:(0,a.w5)((()=>[(0,a.Uk)("Test")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1}),c,d,(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Notification settings")])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:i.activeItem,"onUpdate:modelValue":t[4]||(t[4]=e=>i.activeItem=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.notifications,((e,t)=>((0,a.wg)(),(0,a.j4)(D,{key:t,collapseId:t,headerTitle:l.getTitle(e)},{default:(0,a.w5)((()=>[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.statuses,((e,n)=>((0,a.wg)(),(0,a.iD)("li",{key:n},[(0,a.Wm)(w,{modelValue:o.notifications[t].statuses[n],"onUpdate:modelValue":e=>o.notifications[t].statuses[n]=e,label:n,onClick:e=>l.saveNotifications(t,n)},null,8,["modelValue","onUpdate:modelValue","label","onClick"]),o.spinners[t][n]?((0,a.wg)(),(0,a.iD)("span",f,"Saved!")):(0,a.kq)("",!0)])))),128))])])),_:2},1032,["collapseId","headerTitle"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})],64)}var h=n(4313),m=n(4870),v={name:"TelegramSettings",components:{MDBCard:h.Yl,MDBCardBody:h.H7,MDBCardTitle:h.QM,MDBCardText:h.Pp,MDBBtn:h.$v,MDBContainer:h.L5,MDBInput:h.u2,MDBAccordion:h.FI,MDBAccordionItem:h.nn,MDBSwitch:h.xc},data(){return{token:"",chatId:"",notifications:{},saved:!0,spinners:[]}},setup(){const e=(0,m.iH)("collapseOne");return{activeItem:e}},async created(){await fetch("/api/settings").then((e=>{this.token=e["token"],this.chatId=e["chatId"],this.notifications=e["notifications"];for(let t in this.notifications){this.spinners[t]={};for(let e in this.notifications[t]["statuses"])this.spinners[t][e]=!1}}))},methods:{setUnsaved(){this.saved=!1},saveNotifications(e,t){setTimeout((()=>{this.makeRequest(),this.spinners[e][t]=!0,setTimeout((()=>{this.spinners[e][t]=!1}),2e3)}),3e3)},saveSettings(e){e.preventDefault(),this.makeRequest()},testSettings(e){e.preventDefault();let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"This is a test message"})};fetch("/api/test-message",t).then((e=>e.json())).then((e=>{"FAIL"===e.status?alert("request failed: "+e.error):alert("request successfully sent!")}))},makeRequest(){let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:this.token,chatId:this.chatId,notifications:this.notifications})};fetch("/api/settings",e).then((e=>e.json())).then((()=>{alert("saved"),this.saved=!0}))},getTitle(e){let t=0;for(let n in e.statuses)e.statuses[n]&&t++;return e.title+" ("+t+" of "+Object.keys(e.statuses).length+" enabled)"}}},g=n(89);const k=(0,g.Z)(v,[["render",p],["__scopeId","data-v-344f8ea4"]]);var w=k,D={name:"App",components:{TelegramSettings:w}};const b=(0,g.Z)(D,[["render",o]]);var y=b;(0,i.ri)(y).mount("#app")}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,o){if(!i){var l=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],o=e[c][2];for(var s=!0,u=0;u<i.length;u++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[u])}))?i.splice(u--,1):(s=!1,o<l&&(l=o));if(s){e.splice(c--,1);var r=a();void 0!==r&&(t=r)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,l=i[0],s=i[1],u=i[2],r=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var c=u(n)}for(t&&t(i);r<l.length;r++)o=l[r],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},i=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(881)}));i=n.O(i)})();
//# sourceMappingURL=app.b3ae55a0.js.map